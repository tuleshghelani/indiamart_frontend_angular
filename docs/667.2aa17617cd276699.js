"use strict";(self.webpackChunkworkflow=self.webpackChunkworkflow||[]).push([[667],{1667:(et,g,i)=>{i.r(g),i.d(g,{DashboardModule:()=>nt});var d=i(177),b=i(9012),u=i(6440),c=i(9159),h=i(2042),O=i(951),M=i(4099),t=i(4438),F=i(5175),m=i(9417),f=i(6467),C=i(9631),_=i(2798),D=i(6600),y=i(9213),P=i(8834);const x=()=>[5,10,20,50];function S(n,a){if(1&n&&(t.j41(0,"mat-option",30),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(),t.SpI(" ",e.viewValue," ")}}function E(n,a){1&n&&(t.j41(0,"mat-icon"),t.EFF(1,"hourglass_empty"),t.k0s())}function v(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1," No. "),t.k0s())}function k(n,a){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&n){const e=a.index,r=t.XpG();t.R7$(),t.SpI(" ",(r.currentPage-1)*r.pageSize+e+1," ")}}function w(n,a){1&n&&(t.j41(0,"th",33),t.EFF(1," Sender Name "),t.k0s())}function T(n,a){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(),t.SpI(" ",e.sender_name," ")}}function R(n,a){1&n&&(t.j41(0,"th",33),t.EFF(1," Query Type "),t.k0s())}function j(n,a){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(),t.SpI(" ",e.query_type," ")}}function q(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1," Type of LEAD "),t.k0s())}function $(n,a){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,r=t.XpG();t.R7$(),t.SpI(" ",r.getLeadType(e.query_type)," ")}}function I(n,a){1&n&&(t.j41(0,"th",33),t.EFF(1," Company "),t.k0s())}function N(n,a){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(),t.SpI(" ",e.sender_company," ")}}function G(n,a){1&n&&(t.j41(0,"th",33),t.EFF(1," State "),t.k0s())}function V(n,a){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(),t.SpI(" ",e.sender_state," ")}}function z(n,a){1&n&&(t.j41(0,"th",33),t.EFF(1," Mobile "),t.k0s())}function B(n,a){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(),t.SpI(" ",e.sender_mobile," ")}}function Y(n,a){1&n&&(t.j41(0,"th",33),t.EFF(1," Query Time "),t.k0s())}function A(n,a){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&n){const e=a.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.query_time,"medium")," ")}}function X(n,a){1&n&&(t.j41(0,"th",33),t.EFF(1," Status "),t.k0s())}function U(n,a){if(1&n&&(t.j41(0,"td",32),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,r=t.XpG();t.R7$(),t.SpI(" ",r.getStatusText(e.enquiry_status)," ")}}function H(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1," Action "),t.k0s())}function L(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",32)(1,"button",34),t.bIt("click",function(){const o=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.onAction(o.id))}),t.EFF(2,"View"),t.k0s()()}}function Q(n,a){1&n&&t.nrm(0,"tr",35)}function J(n,a){1&n&&t.nrm(0,"tr",36)}let Z=(()=>{class n{constructor(e,r,o){this.enquiryService=e,this.formBuilder=r,this.router=o,this.displayedColumns=["id","sender_name","query_type","lead_type","sender_company","sender_state","sender_mobile","query_time","enquiry_status","action"],this.dataSource=new c.I6([]),this.totalRecords=0,this.currentPage=1,this.pageSize=20,this.orderBy="",this.isDownloading=!1,this.statusOptions=O.y,this.getLeadType=M.$,this.filterForm=this.formBuilder.group({search:[""],enquiryStatus:[""],startDate:[""],endDate:[""]})}ngOnInit(){this.loadEnquiries()}loadEnquiries(){const e=this.filterForm.value,r={currentPage:this.currentPage,perPageRecord:this.pageSize,search:e.search,enquiryStatus:e.enquiryStatus,orderBy:this.orderBy,startDate:e.startDate?this.formatDate(new Date(e.startDate)):null,endDate:e.endDate?this.formatDate(new Date(e.endDate)):null};this.enquiryService.searchEnquiries(r).subscribe(o=>{this.dataSource.data=o.DATA.results,this.totalRecords=o.DATA.pagination.totalRecords},o=>{console.error("Error fetching enquiries",o)})}onPageChange(e){this.currentPage=e.pageIndex+1,this.pageSize=e.pageSize,this.loadEnquiries()}onSubmit(){this.currentPage=1,this.loadEnquiries()}onEnquiryDownload(){this.isDownloading=!0;const e=this.filterForm.value,r={currentPage:this.currentPage,perPageRecord:this.pageSize,search:e.search,enquiryStatus:e.enquiryStatus,orderBy:this.orderBy,startDate:e.startDate?this.formatDate(new Date(e.startDate)):null,endDate:e.endDate?this.formatDate(new Date(e.endDate)):null};this.enquiryService.downloadEnquiries(r).subscribe(o=>{const s=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=window.URL.createObjectURL(s),p=document.createElement("a");p.href=l,p.download="enquiries.xlsx",p.click(),this.isDownloading=!1},o=>{console.error("Error fetching enquiries",o),this.isDownloading=!1})}onSortChange(e){this.orderBy=e.active.toUpperCase(),this.loadEnquiries()}getStatusText(e){const r=this.statusOptions.find(o=>o.value===e);return r?r.viewValue:e}formatDate(e){return`${e.getDate().toString().padStart(2,"0")}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getFullYear()}`}onReset(){this.initializeForm(),this.currentPage=1,this.pageSize=20,this.orderBy="",this.sort&&(this.sort.active="",this.sort.direction=""),this.paginator&&(this.paginator.pageIndex=0),this.loadEnquiries()}initializeForm(){this.filterForm=this.formBuilder.group({search:[""],enquiryStatus:[""],startDate:[""],endDate:[""]})}onAction(e){this.router.navigate(["/enquiry-details",e])}static{this.\u0275fac=function(r){return new(r||n)(t.rXU(F.X),t.rXU(m.ok),t.rXU(b.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-dashboard"]],viewQuery:function(r,o){if(1&r&&(t.GBs(u.iy,5),t.GBs(h.B4,5)),2&r){let s;t.mGM(s=t.lsd())&&(o.paginator=s.first),t.mGM(s=t.lsd())&&(o.sort=s.first)}},decls:62,vars:12,consts:[[1,"dashboard-container"],[1,"filters",3,"formGroup"],["matInput","","placeholder","Search","formControlName","search"],["formControlName","enquiryStatus"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","date","formControlName","startDate"],["matInput","","type","date","formControlName","endDate"],[1,"button-group"],["mat-raised-button","","color","primary","type","submit",3,"click"],["mat-raised-button","","color","accent","type","submit",3,"click","disabled"],[4,"ngIf"],["mat-raised-button","","color","warn","type","button",3,"click"],[1,"mat-elevation-z8","table-container"],["mat-table","","matSort","",1,"enquiry-table",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sender_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","query_type"],["matColumnDef","lead_type"],["matColumnDef","sender_company"],["matColumnDef","sender_state"],["matColumnDef","sender_mobile"],["matColumnDef","query_time"],["matColumnDef","enquiry_status"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","length","pageSize","pageSizeOptions"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-raised-button","","color","accent",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,o){1&r&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2,"Enquiries Dashboard"),t.k0s(),t.j41(3,"form",1)(4,"mat-form-field"),t.nrm(5,"input",2),t.k0s(),t.j41(6,"mat-form-field")(7,"mat-label"),t.EFF(8,"Enquiry Status"),t.k0s(),t.j41(9,"mat-select",3),t.DNE(10,S,2,2,"mat-option",4),t.k0s()(),t.j41(11,"mat-form-field")(12,"mat-label"),t.EFF(13,"Start Date"),t.k0s(),t.nrm(14,"input",5),t.k0s(),t.j41(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"End Date"),t.k0s(),t.nrm(18,"input",6),t.k0s(),t.j41(19,"div",7)(20,"button",8),t.bIt("click",function(){return o.onSubmit()}),t.EFF(21,"Submit"),t.k0s(),t.j41(22,"button",9),t.bIt("click",function(){return o.onEnquiryDownload()}),t.DNE(23,E,2,0,"mat-icon",10),t.EFF(24),t.k0s(),t.j41(25,"button",11),t.bIt("click",function(){return o.onReset()}),t.EFF(26,"Reset"),t.k0s()()(),t.j41(27,"div",12)(28,"table",13),t.bIt("matSortChange",function(l){return o.onSortChange(l)}),t.qex(29,14),t.DNE(30,v,2,0,"th",15)(31,k,2,1,"td",16),t.bVm(),t.qex(32,17),t.DNE(33,w,2,0,"th",18)(34,T,2,1,"td",16),t.bVm(),t.qex(35,19),t.DNE(36,R,2,0,"th",18)(37,j,2,1,"td",16),t.bVm(),t.qex(38,20),t.DNE(39,q,2,0,"th",15)(40,$,2,1,"td",16),t.bVm(),t.qex(41,21),t.DNE(42,I,2,0,"th",18)(43,N,2,1,"td",16),t.bVm(),t.qex(44,22),t.DNE(45,G,2,0,"th",18)(46,V,2,1,"td",16),t.bVm(),t.qex(47,23),t.DNE(48,z,2,0,"th",18)(49,B,2,1,"td",16),t.bVm(),t.qex(50,24),t.DNE(51,Y,2,0,"th",18)(52,A,3,4,"td",16),t.bVm(),t.qex(53,25),t.DNE(54,X,2,0,"th",18)(55,U,2,1,"td",16),t.bVm(),t.qex(56,26),t.DNE(57,H,2,0,"th",15)(58,L,3,0,"td",16),t.bVm(),t.DNE(59,Q,1,0,"tr",27)(60,J,1,0,"tr",28),t.k0s(),t.j41(61,"mat-paginator",29),t.bIt("page",function(l){return o.onPageChange(l)}),t.k0s()()()),2&r&&(t.R7$(3),t.Y8G("formGroup",o.filterForm),t.R7$(7),t.Y8G("ngForOf",o.statusOptions),t.R7$(12),t.Y8G("disabled",o.isDownloading),t.R7$(),t.Y8G("ngIf",o.isDownloading),t.R7$(),t.SpI(" ",o.isDownloading?"Downloading...":"Download"," "),t.R7$(4),t.Y8G("dataSource",o.dataSource),t.R7$(31),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns),t.R7$(),t.Y8G("length",o.totalRecords)("pageSize",o.pageSize)("pageSizeOptions",t.lJ4(11,x)))},dependencies:[d.Sq,d.bT,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,u.iy,h.B4,h.aE,f.rl,f.nJ,C.fg,_.VO,D.wT,y.An,P.$z,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,d.vh],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;background:#d7e3ff}.text-center[_ngcontent-%COMP%]{text-align:center}.ml20[_ngcontent-%COMP%]{margin-left:20px!important}.mr20[_ngcontent-%COMP%]{margin-right:20px!important}.mt20[_ngcontent-%COMP%]{margin-top:20px!important}.mb20[_ngcontent-%COMP%]{margin-bottom:20px!important}.ml10[_ngcontent-%COMP%]{margin-left:10px!important}.mr10[_ngcontent-%COMP%]{margin-right:10px!important}.mt10[_ngcontent-%COMP%]{margin-top:10px!important}.mb10[_ngcontent-%COMP%]{margin-bottom:10px!important}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0;font-family:Roboto,Segoe UI,Helvetica Neue,Arial,sans-serif;background:#d7e3ff;overflow-x:hidden}body[_ngcontent-%COMP%]{min-height:100vh;width:100%;max-width:100vw}.full-width[_ngcontent-%COMP%]{width:100%;max-width:100%;box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}body[_ngcontent-%COMP%]{font-family:Roboto,Segoe UI,Helvetica Neue,Arial,sans-serif;background-color:#d7e3ff;color:#000000de}.primary-bg[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}.secondary-bg[_ngcontent-%COMP%]{background-color:#ff4081;color:#fff}.accent-bg[_ngcontent-%COMP%]{background-color:#ffd740;color:#000000de}[_ngcontent-%COMP%]:export{primaryColor:#3f51b5;secondaryColor:#ff4081;accentColor:#ffd740}.dashboard-container[_ngcontent-%COMP%]{padding:20px}.dashboard-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#3f51b5;margin-bottom:20px;font-size:24px}@media (max-width: 600px){.dashboard-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}.dashboard-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;margin-bottom:20px;align-items:center}.dashboard-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1 1 200px}.dashboard-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:10px}.dashboard-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:0 0 auto;height:36px}@media (max-width: 600px){.dashboard-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.dashboard-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .dashboard-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.dashboard-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{flex-direction:column}}.dashboard-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}.dashboard-container[_ngcontent-%COMP%]   .enquiry-table[_ngcontent-%COMP%]{width:100%;min-width:800px}.dashboard-container[_ngcontent-%COMP%]   .enquiry-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;font-weight:700}.dashboard-container[_ngcontent-%COMP%]   .enquiry-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5}.dashboard-container[_ngcontent-%COMP%]   .enquiry-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.dashboard-container[_ngcontent-%COMP%]   .enquiry-table[_ngcontent-%COMP%]   .mat-column-action[_ngcontent-%COMP%]{width:100px;text-align:center}.dashboard-container[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%]{background-color:#f5f5f5}@media (max-width: 600px){.dashboard-container[_ngcontent-%COMP%]{padding:10px}.dashboard-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.dashboard-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:center}}"]})}}return n})();var K=i(5084),W=i(9183);const tt=[{path:"",component:Z}];let nt=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[d.MD,c.tP,u.Ou,h.NQ,K.X6,D.WX,f.RG,C.fS,_.Ve,y.m_,P.Hl,W.D6,m.X1,b.iI.forChild(tt)]})}}return n})()}}]);